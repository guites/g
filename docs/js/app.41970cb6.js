(function(e){function t(t){for(var a,o,n=t[0],c=t[1],l=t[2],u=0,g=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&g.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(g.length)g.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={app:0},r=[];function o(e){return n.p+"js/"+({about:"about"}[e]||e)+"."+{about:"89b511c6"}[e]+".js"}function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(e){var t=[],s=i[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=i[e]=[t,a]}));t.push(s[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=o(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(u);var s=i[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,s[1](l)}i[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/g/",n.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[e._m(0),s("router-view",{staticClass:"container"})],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("div",{staticClass:"inner-header"},[a("nav",[a("ul",[a("li",[a("p",[e._v("gchan")]),a("img",{attrs:{src:s("a669")}})]),a("li",[a("a",{attrs:{href:"#mensagens"}},[e._v("mensagens")])]),a("li",[a("a",{attrs:{href:"#info"}},[e._v("info/postagem")])])])]),a("form",[a("label",{attrs:{for:"search"}},[e._v("Busque:")]),a("input",{attrs:{type:"text",name:"search",placeholder:"assunto/mensagem",required:""}}),a("button",{attrs:{type:"sumit"}},[e._v("pesquisar")])])]),a("div",{staticClass:"resp-header"},[a("ul",[a("li",[e._v("gchan"),a("img",{attrs:{src:"assets/sham.png"}})]),a("li",[a("form",[a("label",{attrs:{for:"search"}},[e._v("Busque:")]),a("input",{attrs:{type:"text",name:"search",placeholder:"assunto/mensagem",required:""}}),a("button",{attrs:{type:"sumit"}},[e._v("pesquisar")])])])])])])}],o=s("2877"),n={},c=Object(o["a"])(n,i,r,!1,null,null,null),l=c.exports,u=s("8c4f"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",{staticClass:"create-thread"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.addMessage(t)}}},[e.error?s("div",{staticClass:"alert-error"},[s("close",{on:{click:function(t){e.error=""}}},[e._v("x")]),s("h4",[e._v("Erro!")]),s("p",[e._v(e._s(e.error))])],1):e._e(),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[e._v("Usuário")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.message.username,expression:"message.username"}],staticClass:"form-control",attrs:{type:"text",id:"username","aria-describedby":"usernameHelp",value:"anon",required:""},domProps:{value:e.message.username},on:{input:function(t){t.target.composing||e.$set(e.message,"username",t.target.value)}}}),s("small",{staticClass:"form-text text-muted",attrs:{id:"usernameHelp"}},[e._v(" remember: no use for a name ")])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"subject"}},[e._v("Assunto")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.message.subject,expression:"message.subject"}],staticClass:"form-control",attrs:{type:"subject",id:"subject",placeholder:"subject",required:""},domProps:{value:e.message.subject},on:{input:function(t){t.target.composing||e.$set(e.message,"subject",t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"message"}},[e._v("Mensagem")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message.message,expression:"message.message"}],staticClass:"form-control",attrs:{id:"message",rows:"5"},domProps:{value:e.message.message},on:{input:function(t){t.target.composing||e.$set(e.message,"message",t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"imageURL"}},[e._v("image URL")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.message.imageURL,expression:"message.imageURL"}],staticClass:"form-control",attrs:{type:"url",id:"imageURL",placeholder:"https://~"},domProps:{value:e.message.imageURL},on:{input:function(t){t.target.composing||e.$set(e.message,"imageURL",t.target.value)}}}),s("div",{staticClass:"gif-search-toggle",attrs:{"data-toggle":"buttons"}},[s("input",{attrs:{type:"radio",name:"options",id:"option1",autocomplete:"off",checked:"",value:"giphy"},on:{change:e.searchGif}}),s("label",{staticClass:"btn btn-primary",attrs:{for:"option1"}},[e._v("Giphy")]),s("input",{attrs:{type:"radio",name:"options",id:"option2",autocomplete:"off",value:"gfycat"},on:{change:e.searchGif}}),s("label",{staticClass:"btn btn-primary",attrs:{for:"option2"}},[e._v("gfycat")])]),s("label",{attrs:{for:"giphy-search"}},[e._v("Busque um gif")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.message.giphyURL,expression:"message.giphyURL"}],staticClass:"form-control",attrs:{type:"text",id:"giphyURL",placeholder:"cats"},domProps:{value:e.message.giphyURL},on:{keyup:e.searchGif,input:function(t){t.target.composing||e.$set(e.message,"giphyURL",t.target.value)}}})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Enviar")])]),e.isGifBeingSearched?s("div",{staticClass:"gifBoxWrapper"},[e.emptyGifResults?s("div",{staticClass:"emptyGifResults"},[s("img",{staticClass:"emptyGifResultsImg",attrs:{src:"https://via.placeholder.com/480?text=nenhum gif :("}})]):e._e(),""===e.emptyGifResults?s("div",{staticClass:"gifBox"},e._l(e.uniqueGifs,(function(t){return s("div",{key:t.id,staticClass:"gifBoxGif"},[s("img",{staticClass:"gif-thumb",attrs:{"data-original":t.originalUrl,src:t.thumbUrl},on:{click:e.selectGif}})])})),0):e._e(),s("div",{staticClass:"paginate-arrows"},[e.hasPag?s("ul",{staticClass:"pagination"},[s("div",e._l(e.numPages,(function(t){return s("li",{key:t,staticClass:"page-item",class:{active:e.currPage==t},on:{click:e.paginateGif}},[s("a",{staticClass:"page-link",attrs:{href:"#void"}},[e._v(e._s(t))])])})),0)]):e._e()])]):e._e()]),e._l(e.reversedMessages,(function(t){return s("div",{key:t._id,staticClass:"list-unstyled d-flex flex-column align-items-center"},[s("li",{staticClass:"media"},[t.imageurl?s("img",{staticClass:"img-thumbnail",attrs:{src:t.imageurl,alt:t.subject}}):s("img",{staticClass:"img-thumbnail",attrs:{src:"https://via.placeholder.com/300?text=:("}}),s("div",{staticClass:"align-self-center media-body"},[s("h4",{staticClass:"mt-0 mb-1"},[e._v(e._s(t.username))]),s("h5",{staticClass:"mt-0 mb-1"},[e._v(e._s(t.subject))]),e._v(" "+e._s(t.message)+" "),s("br"),s("small",[e._v(e._s(t.created))])])]),s("hr")])})),e.set_cookie_consent?s("section",{attrs:{id:"cookie_consent"}},[s("div",{staticClass:"cookie_consent_wrapper"},[s("p",{staticClass:"cookie_message"},[e._v(" Nossos site coleta estatisticas de acesso através do google analytics. ")]),s("div",{staticClass:"cookie-btns"},[s("a",{attrs:{href:"cookie_politics.html"}},[e._v("ver nossa política de cookies")]),s("div",{staticClass:"cookie_btn_wrapper"},[s("button",{attrs:{id:"cookie-recusar"},on:{click:e.defineCookieConsent}},[e._v("recusar")]),s("button",{attrs:{id:"cookie-aceitar"},on:{click:e.defineCookieConsent}},[e._v("aceitar")])])])])]):e._e()],2)},g=[];const p="https://gchan-message-board.herokuapp.com/messages";var d={name:"Home",data:()=>({set_cookie_consent:!1,gifsPerPage:4,currPage:1,numPages:5,error:"",apiRoute:"giphy",isGifBeingSearched:"",emptyGifResults:"",hasPag:"",messages:[],gifs:[],message:{username:"Anonymous",subject:"",message:"",imageURL:""}}),computed:{reversedMessages(){return console.log(this.messages),this.messages.slice().reverse()},uniqueGifs(){const e=[],t=new Map;return this.gifs.forEach(s=>{t.has(s.id)||(t.set(s.id,!0),e.push({id:s.id,thumbUrl:s.thumbUrl,originalUrl:s.originalUrl}))}),e}},mounted(){function e(e){const t=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""}fetch(p).then(e=>e.json()).then(e=>{this.messages=e.results});const t=e("cookie_consent_variable");""!==t?(window.cookie_consent_variable=t,this.set_cookie_consent=!1,this.ajaxGtmRequest()):this.set_cookie_consent=!0,console.log("consentCookie",typeof t),console.log("window.cookie_consent_variable",window.cookie_consent_variable),console.log("this.set_cookie_consent",this.set_cookie_consent)},methods:{addMessage(){fetch(p,{method:"POST",body:JSON.stringify(this.message),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>{if(e.details){const t=e.details.map(e=>e.message).join(".");this.error=t}else this.error="",this.messages.push(JSON.parse(e))})},searchGif(e){let t;switch("giphyURL"===e.target.id?(t=e.target.value,this.isGifBeingSearched=""===t?"":1):t=document.querySelector("#giphyURL").value,this.hasPag=""===t?"":"1",document.querySelector("input[type='radio']:checked").value){default:this.apiRoute="giphy",fetch(`https://api.giphy.com/v1/gifs/search?api_key=5KnNW5U9nJ2Xjnas3lugKxMIXVdCsrqF&q=${t}&limit=${this.gifsPerPage}&offset=${(this.currPage-1)*this.gifsPerPage}`).then(e=>e.json()).then(e=>{const t=e.data;0===t.length?this.emptyGifResults=1:this.emptyGifResults="",this.gifs=[],t.forEach(e=>{this.gifs.push({id:e.id,thumbUrl:e.images.preview_webp.url,originalUrl:e.images.original.webp})})}).catch(e=>{console.log(e),this.emptyGifResults=1});break;case"gfycat":this.apiRoute="gfycat",fetch(`https://api.gfycat.com/v1/gfycats/search?count=${this.gifsPerPage*this.numPages}&search_text='${t}`).then(e=>e.json()).then(e=>{const t=e.gfycats;this.gfycatCursor=e.cursor,0===t.length?this.emptyGifResults=1:this.emptyGifResults="";const s=(this.currPage-1)*this.gifsPerPage,a=s+this.gifsPerPage;this.gifs=[];let i=0;t.forEach(e=>{i>=s&&i<a&&this.gifs.push({id:e.gfyId,thumbUrl:e.max1mbGif,originalUrl:e.webpUrl}),i+=1})}).catch(e=>{console.error(e),this.emptyGifResults=1});break}},selectGif(e){const t=e.target.getAttribute("data-original");document.querySelector("#imageURL").value=t,this.message.imageURL=t},paginateGif(e){this.currPage=e.target.innerText,this.searchGif(e)},defineCookieConsent(e){window.cookie_consent_variable=e.target.id.includes("cookie-aceitar"),this.set_cookie_consent=window.cookie_consent_variable;const t=new Date,s=t.setTime(t.getTime()+6048e5);this.set_cookie_consent?document.cookie="cookie_consent_variable=true;expires="+s:document.cookie="cookie_consent_variable=false;expires="+s,this.ajaxGtmRequest(),this.set_cookie_consent=!1},ajaxGtmRequest(){const e=document.createElement("script");e.type="text/javascript";const t="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n  })(window,document,'script','dataLayer','GTM-K57247W');";try{e.appendChild(document.createTextNode(t)),document.head.appendChild(e)}catch(s){e.text=t,document.head.appendChild(e)}}}},h=d,f=Object(o["a"])(h,m,g,!1,null,null,null),v=f.exports;a["a"].use(u["a"]);const _=[{path:"/",name:"Home",component:v},{path:"/about",name:"About",component(){return s.e("about").then(s.bind(null,"f820"))}}],b=new u["a"]({routes:_});var y=b;a["a"].config.productionTip=!1,new a["a"]({router:y,render(e){return e(l)}}).$mount("#app")},a669:function(e,t,s){e.exports=s.p+"img/sham.e93e9eaa.png"}});
//# sourceMappingURL=app.41970cb6.js.map